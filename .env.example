# ════════════════════════════════════════════════════════════════════════════
#  Scanctum — Environment Variables
#  Copy this file to .env and fill in every value before running the app.
# ════════════════════════════════════════════════════════════════════════════

# ── Database ─────────────────────────────────────────────────────────────────
# Async URL used by FastAPI (asyncpg driver)
DATABASE_URL=postgresql+asyncpg://USER:PASSWORD@HOST:5432/scanctum

# Sync URL used by Celery workers (psycopg2 driver)
DATABASE_URL_SYNC=postgresql+psycopg2://USER:PASSWORD@HOST:5432/scanctum

# ── Redis ─────────────────────────────────────────────────────────────────────
# Used as Celery broker, result backend, and WebSocket pub/sub channel.
# For TLS (Upstash, Render Redis with TLS): use rediss:// prefix
REDIS_URL=redis://redis:6379/0

# ── JWT ───────────────────────────────────────────────────────────────────────
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=REPLACE_WITH_64_CHAR_RANDOM_HEX_STRING
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=480

# ── CORS ──────────────────────────────────────────────────────────────────────
# Comma-separated list OR JSON array of allowed frontend origins.
# Example for production: ["https://app.yourdomain.com"]
BACKEND_CORS_ORIGINS=["http://localhost:3000"]

# ── API ───────────────────────────────────────────────────────────────────────
API_V1_PREFIX=/api/v1

# ── Frontend ──────────────────────────────────────────────────────────────────
# Must point to the public URL of your FastAPI backend.
# Set to your Render backend URL in production (no trailing slash).
NEXT_PUBLIC_API_URL=http://localhost:8000/api/v1

# ── Scanner tuning ────────────────────────────────────────────────────────────
# Lower these values on free/small plans to stay within resource limits.
SCANNER_MAX_DEPTH_QUICK=2
SCANNER_MAX_PAGES_QUICK=20
SCANNER_MAX_DEPTH_FULL=5
SCANNER_MAX_PAGES_FULL=100
# Minimum seconds between requests to the same domain (MUST be ≥ 2.0)
SCANNER_REQUEST_DELAY=2.0
# Max concurrent in-flight HTTP requests during crawling
SCANNER_CONCURRENCY=5

# ── Local dev only (docker-compose) ─────────────────────────────────────────
# These are only used when postgres/redis run locally via docker-compose.
# Leave blank when using managed cloud databases.
POSTGRES_USER=scanctum
POSTGRES_PASSWORD=scanctum_secret
POSTGRES_DB=scanctum
